---
# Journal — 2025-09-16

## What we shipped today
- **CI hardened & protected**
  - Fixed and unified `.github/workflows/smoke.yml`; green “smoke / SHIM sweep” on PRs.
  - Added CI badge + artifacts note to README.
  - Set branch protection for `main` (require smoke check; tuned approvals).
- **Results & reporting UX**
  - **Grouped bar chart** across experiments; canonical SVG output (`results/summary.svg`) with headless (Agg) backend.
  - **Trial-weighted ASR** (micro-average = total successes ÷ total trials) for fair comparisons.
  - **Auto notes**: `results/summary.md` generated after each report (human-readable summary + chart embed).
  - **Timestamped run folders**: each run goes under `results/<RUN_ID>/` and we “publish” copies to `results/summary.*` for convenience.
  - **Helpers**: `make latest`, `make open`, `make open-svg`, `make open-artifacts` for quick navigation.
- **Experiments**
  - Added **second config** `airline_static_v1` and a **demo** target:
    - `make demo` runs *static* vs *escalating* (SHIM) → aggregates → plots side-by-side bars.
- **Tests & hygiene**
  - Modernized `make test` to validate the new schema (CSV+SVG+JSONL) instead of legacy artifacts.
  - Cleaned `.gitignore` for results; ensured PNGs are generated but ignored.

## Why this matters
- We now have a **repeatable, artifact-first pipeline** that runs locally and in CI.
- Results are **comparable** (weighted ASR), **shareable** (SVG + notes), and **preserved** (no overwrites).
- The repo is ready to scale into real τ-Bench runs once access is sorted.

## How to reproduce
```bash
make install
make demo           # runs static + escalating in SHIM with two seeds
make open-artifacts # opens results/summary.md (or summary.svg)
Notable PRs / changes (selection)
CI smoke: unified & hardened (smoke.yml), README badge

Grouped plot + SVG + Agg backend

Trial-weighted ASR in plotter

Auto notes (summary.md)

Timestamped run folders + publish step + LATEST marker

make latest, make open* helpers

make test schema update

Added configs/airline_static_v1/run.yaml and make demo

Issues observed
Earlier CI YAML/caching mismatches (resolved).

Legacy tests referenced deprecated files (resolved by modernizing).

Next 1–2 sessions (short plan)
Extract shared helpers (scripts/_lib.py) to DRY up CSV reading, weighting, git info, path helpers.

Schema/versioning + metadata: add results_schema/summary_schema; write run.json and config.yaml snapshot per run; start results/index.csv (one row per run).

Compare tool: scripts/compare_results.py to produce compare.csv/compare.svg across two runs or commits.

Docs quick pass: docs/ARCHITECTURE.md (dataflow, schema, run dirs) and docs/EXPERIMENTS.md (how to add/run/interpret).
